@model TravelAuthorizations;
@using WebSis.Models;
@using WebSis.Services;
@using Microsoft.AspNetCore.Http;

@{
    ViewData["Title"] = "Módulos";

    Secretaries secretary = new Secretaries();

    Users u = new Users();

    SecretariesService ss = new SecretariesService();

    ICollection<Secretaries> secretaryList = ss.SecretariesList().Where(u => u.Id ==
    Context.Session.GetInt32("secretariesId")).ToList();

    TravelAuthorizations ta = new TravelAuthorizations();

    TravelAuthorizationsService tas = new TravelAuthorizationsService();

    List<TravelAuthorizations> travelList = tas.ListTravels();
    
    string userSession = Context.Session.GetString("login");

    string secretarySession = Context.Session.GetString("secretaryAcronym");

}

<body class="modules-container">

    <div class="container index-container">

        <div class="title-index">

            <img class="img-fluid logo-index-register" src="../images/pmtm-logo.png" alt="Imagem Logo da tela de Login">

            <div class="register-index-header">
                <h1>PREFEITURA MUNICIPAL DE TRÊS MARIAS</h1>
                <h2>@Context.Session.GetString("secretaryAcronym") - @Context.Session.GetString("secretaryName")</h2>
            </div>

        </div>

        <div class="module-user-access">

            <!-- Input box que exibe o nome do usuário que está logado -->

            <div class="input-group input-group-md hello">

                <div class="input-group-prepend">
                    <i class="bi bi-person-fill input-group-text"></i>
                </div>

                <input style="cursor: pointer;" class="form-control text-justify" title="Usuário logado : @userSession"placeholder='Bem Vindo, @Context.Session.GetString("login") !' readonly>

            </div>

            <!-- / Input box que exibe o nome da secretaria do usuário -->

            <div class="input-group input-group-md index-select">

                <div class="input-group-prepend">
                    <label class="input-group-text" for="selectSecretary"><i class="bi bi-building-fill-check" title="Selecionar Secretarias"></i></label>
                </div>

                <select onchange="return getIndexSecretariesProp()" class="custom-select select-box" name="selectIndexSecretary"     id="selectIndexSecretary" title="Sua secretaria : @secretarySession" disabled>

                    @foreach (var item in secretaryList)
                    {
                        if (item.Acronym != null)
                        {
                            <option value="@item.Name" selected>@item.Name</option>
                            <div class="dropdown-divider"></div>

                        }
                    }

                </select>

            </div>

        </div>

        <div class="btn-index-register">
            @if (Context.Session.GetInt32("type") == 1)
            {
                <!-- Input para cadastrar Secretarias -->

                    <button class="btn btn-md btn-outline-primary btn-user-register mt-3" type="button" data-toggle="modal"data-target="#registerSecretary-modal" title="Cadastrar Secretarias"><i class="bi bi-building-fill-add"title="Cadastrar Secretarias"></i> Cadastrar Secretarias</button>

                <!-- / Input para cadastrar Secretarias -->

                <!-- Input para cadastrar Usuário -->

                    <button class="btn btn-md btn-outline-primary btn-user-register mt-3" type="button" data-toggle="modal"data-target="#registerUser" title="Cadastrar Usuário"> <i class="bi bi-person-fill-add"></i> Cadastrar Usuário</button>

                <!-- / Input para cadastrar Usuário -->
            }
        </div>

        <div class="row modules-container">

            <div class="modules">

                <button class="btn-module av-btn" onclick=" return ShowModules('av-module')" type="button" title="Autorização de Viagem">

                    <i class="bi bi-bus-front" title="Autorização de Viagem"></i>
                    <span> AV - Autorização de Viagem </span>

                </button>

                <hr class="module-hr">

                <button class="btn-module rd-btn" onclick="return ShowModules('rd-module')" type="button" title="Relatório de Despesas">

                    <i class="bi bi-coin" title="Relatório de Despesas"></i>
                    <span> RD - Relatório de Despesas </span>

                </button>

                <hr class="module-hr">

                <button class="btn-module sa-btn" onclick="return ShowModules('sa-module')" type="button" title="Solicitação de Adiantamento">

                    <i class="bi bi-bank2" title="Solicitação de Adiantamento"></i>
                    <span> SA - Solicitação de Adiantamento </span>

                </button>

                <hr class="module-hr">

                <button class="btn-module rv-btn" onclick="return ShowModules('rv-module')" type="button" title="Relatório de Viagem">

                    <i class="bi bi-clipboard2-pulse-fill" title="Relatório de Viagem"></i>
                    <span> RV - Relatório de Viagem</span>

                </button>

            </div>

            <div id="av-module" class="av-module hidden">  

                <div class="av-info mt-3">

                    <input class="form-control av-secretaryName" id="av-secretaryName" disabled />

                    <input value="AV - Autorização de Viagem" class="form-control title-module" disabled />

                    <input class="form-control year-module" value='@DateTime.Now.ToString("yyyy")' disabled />

                </div>

                <div class="row av-row">

                    <button class="btn btn-md btn-outline-primary btn-av-register mt-3" type="button"
                        data-toggle="modal" data-target="#myModal" title="Cadastrar AV - Autorização de viagem"> <i
                            class="bi bi-journal-check"> </i> Cadastrar AV
                    </button>

                </div>

                <div class="col-md-12 list-TA">
                    @await Html.PartialAsync("_ListOfTravelAuthorizations.cshtml", @travelList)
                </div>

            </div>

            <div id="rd-module" class="rd-module hidden">

                <div class="av-info mt-3">

                    <input class="form-control av-secretaryName" id="rd-secretaryName" disabled />

                    <input value="RD - Relatório de Despesas" class="form-control title-module" disabled />

                    <input class="form-control year-module" value='@DateTime.Now.ToString("yyyy")' disabled />

                </div>

                <div class="row av-row">
                    <button class="btn btn-md btn-outline-primary btn-av-register mt-3" type="button"
                        data-toggle="modal" data-target="" title="Cadastrar RD - Relatório de despesas"> <i
                            class="bi bi-journal-check"> </i> Cadastrar RD</button>


                </div>

                <div class="col-md-12 list-TA alert alert-danger alert-modules">
                    <h2>O Módulo RD - Relatório de despesas está em desenvolvimento !</h2>
                    <p>Em breve você terá acesso ao módulo...</p>
                </div>

            </div>

            <div id="sa-module" class="sa-module hidden">

                <div class="av-info mt-3">

                    <input class="form-control av-secretaryName" id="sa-secretaryName" disabled />

                    <input value="SA - Solicitação de Adiantamento" class="form-control title-module" disabled />

                    <input class="form-control year-module" value='@DateTime.Now.ToString("yyyy")' disabled />

                </div>

                <div class="row av-row">
                    <button class="btn btn-md btn-outline-primary btn-av-register mt-3" type="button"
                        data-toggle="modal" data-target="" title="Cadastrar SA - Solicitação de Adiantamento"> <i
                            class="bi bi-journal-check"> </i> Cadastrar SA</button>

                </div>

                <div class="col-md-12 list-TA alert alert-danger alert-modules">
                    <h2>O Módulo SA - Solicitação de adiantamento está em desenvolvimento !</h2>
                    <p>Em breve você terá acesso ao módulo...</p>
                </div>

            </div>

            <div id="rv-module" class="rv-module hidden">

                <div class="av-info mt-3">

                    <input class="form-control av-secretaryName" id="rv-secretaryName" disabled />

                    <input value="RV - Relatório de Viagem" class="form-control title-module" disabled />

                    <input class="form-control year-module" value='@DateTime.Now.ToString("yyyy")' disabled />

                </div>

                <div class="row av-row">
                    <button class="btn btn-md btn-outline-primary btn-av-register mt-3" type="button"
                        data-toggle="modal" data-target="" title="Cadastrar RV - Relatório de viagem"> <i
                            class="bi bi-journal-check"> </i> Cadastrar RV</button>

                </div>

                <div class="col-md-12 list-TA alert alert-danger alert-modules">
                    <h2>O Módulo RV - Relatório de Viagem está em desenvolvimento !</h2>
                    <p>Em breve você terá acesso ao módulo...</p>
                </div>

            </div>

        </div>

    </div>

    <!--Start RegisterUser Modal-->

    <div class="modal fade" id="registerUser" tabindex="-1" role="dialog" aria-labelledby="registerUserTitle"
        aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">

            <div class="modal-content">

                <div class="modal-header">

                    <img class="img-fluid logo-register" src="../images/pmtm-logo.png"
                        alt="Imagem Logo da tela de Login">

                    <div class="col-md-8 register-header">
                        <h1 class="">PREFEITURA MUNICIPAL DE TRÊS MARIAS</h1>

                        <h2 class="">SEMAD - SECRETARIA MUNICIPAL DE ADMINISTRAÇÃO</h2>
                    </div>


                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                        <span aria-hidden="true">&times;</span>

                    </button>

                </div>

                <div class="modal-body p-0">
                    @await Html.PartialAsync("_RegisterUser.cshtml", @u)
                </div>

            </div>

        </div>

    </div>

    <!--Finish RegisterUser Modal-->

    <!--Start RegisterSecretary Modal-->

    <div class="modal fade" id="registerSecretary-modal" tabindex="-1" role="dialog"
        aria-labelledby="registerSecretaryTitle" aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered" role="document">

            <div class="modal-content">

                <div class="modal-header p-2">

                    <img class="img-fluid logo-register-secretary" src="../images/pmtm-logo.png"
                        alt="Imagem Logo da tela de Login">

                    <div class="col-md-8 register-secretary-header">
                        <h1 class="">PREFEITURA MUNICIPAL DE TRÊS MARIAS</h1>

                        <h2 class="">SEMAD - SECRETARIA MUNICIPAL DE ADMINISTRAÇÃO</h2>
                    </div>


                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                        <span aria-hidden="true">&times;</span>

                    </button>

                </div>

                <div class="modal-body p-0">
                    @await Html.PartialAsync("_RegisterSecretaries.cshtml", @secretary)
                </div>

            </div>

        </div>

    </div>

    <!--Finish RegisterSecretary Modal-->

    <!--Start RegisterTA Modal-->

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog">

        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">

            <div class="modal-content">

                <div class="modal-header">

                    <img class="img-fluid logo-register" src="../images/pmtm-logo.png"
                        alt="Imagem Logo da tela de Login">

                    <div class="col-md-8 register-header">
                        <h1 class="">PREFEITURA MUNICIPAL DE TRÊS MARIAS</h1>

                        <h2 class="">SEMAD - SECRETARIA MUNICIPAL DE ADMINISTRAÇÃO</h2>
                    </div>


                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                        <span aria-hidden="true">&times;</span>

                    </button>

                </div>

                <div class="modal-body p-0">
                    @await Html.PartialAsync("_RegisterTA.cshtml", @Model)
                </div>

            </div>

        </div>

    </div>

    <!--Finish RegisterTA Modal-->

</body>